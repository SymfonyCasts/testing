# Proveedores de datos

Tratamos nuestras pruebas. No, no lo hacemos. Tratamos a nuestras fuentes como ciudadanos de primera clase. ¿Por qué no hacer lo mismo con otras pruebas? Nuestras tres pruebas para el tamaño son repetitivas. Prueban lo mismo sólo que con diferentes conjuntos de entrada y una aserción diferente. Podemos mejorar esto utilizando unidades de PHP, proveedores de datos, ejecutando la misma prueba una y otra vez con diferentes conjuntos de datos para probarlos vamos a desplazarnos hasta el final de nuestra prueba del dinosaurio te y crearemos una función pública. Uy. Um,

Toma

Una mirada al camino. Vamos a desplazarnos hasta el final de nuestra prueba de dinosaurios y vamos a crear una nueva función pública, el método del proveedor de la descripción del tamaño. Genial. Dentro de este método, va a devolver un rendimiento 10 y grande, y luego vamos a ceder y matriz, que contiene cinco y medio y, finalmente, ceder cuatro y pequeño. Muy bien, volvamos a nuestro primer tamaño, eh, prueba vamos a seguir adelante y añadir en el método. Argumentos, longitud de pista, y luego una cadena. Y esto será el tamaño esperado, justo entonces aquí podemos tomar, eh, vamos a cambiar el enlace de 10 a la longitud. Y luego para grande, cambiemos esto a tamaño esperado estos dos, eh, u otros dos métodos medianos y pequeños. Podemos seguir adelante y deshacernos de ellos. Ya no los necesitamos ahí. Bien. Vuelve a tu terminal. Y vamos a ejecutar la unidad de PHP del vendedor, y utilizaremos el plan de pruebas.

Oh,

Nuestro, nuestro test Dino 10 metros o más es grande está fallando porque hay muy pocos argumentos para la función test Dino 10 metros o más es grande. Pasamos cero y hay exactamente dos argumentos esperados. Esto se debe a que nunca le dijimos a la unidad PHP que utilizara realmente nuestro proveedor de datos para que nuestro método de prueba lo hiciera. Vamos a crear un nuevo bloque doc. Hazlo. Creemos un no todavía todo para hacer eso. Creemos un nuevo método de bloque doc o un nuevo bloque doc en un método. Vamos a deshacernos de todas las cosas que arroja la tormenta de PHP. Y en su lugar escribiremos el proveedor de datos y usaremos nuestro proveedor de descripción de tamaño y PHP, unidad 10, en lugar de usar un dock block para esto, podremos usar atributos, volver a nuestro terminal. Limpiemos las cosas, ejecuta la prueba. De nuevo, pasa la mano. Puedes ver que tenemos cuatro pruebas y siete aserciones. Te das cuenta de que el conjunto de datos cero, el conjunto de datos uno y el conjunto de datos dos aparecen para la misma prueba. Esos son los rendimientos. Son nuestras matrices que hemos cedido en nuestro proveedor de datos. Pero creo que podemos dar un nombre mejor.

Creo que podemos mejorar esto usando yo. A mí. Sí. Podemos mejorar esto utilizando claves de mensajes en el proveedor de datos. Volvamos a nuestra prueba y para un método de descripción del tamaño escribamos y ¿qué estoy escribiendo? Ah, ya está. Sí. Escribamos 10 metros. Dino grande. Haremos lo mismo. Uy. Y haremos lo mismo para el mediano y el pequeño. Copiaremos este trocito de aquí y lo pegaremos aquí. Y de nuevo, aquí para el cambio pequeño, el 10 aquí a cinco. Esto se supone que es un mediano y luego un cuatro. Y esto será una D pequeña genial. Vamos a ejecutar nuestra prueba una vez más. ¿Eh? Genial. Así que tenemos nuestras tres pruebas de tamaño y en lugar del conjunto de datos cero, obtenemos Dino grande de 10 metros aquí, pero ¿qué pasa con este nombre de método, pero qué pasa con este nombre de Dino grande de 10 metros o más que estamos obteniendo para estas tres pruebas? Bueno, de nuevo, ése es el nombre de nuestro método de prueba y, por supuesto, test docs quita la prueba, el prefijo a nuestro nombre de método, y luego transforma nuestro transforma el nombre en hu humano blah.

Test docs quita el test, el prefijo a nuestro nombre de método, y luego transforma el propio nombre en palabras legibles para los humanos. Uh, pon mi ratón. Muy bien, sigamos adelante y cambiemos este método. Nombre a la prueba Dino como descripción del tamaño correcto de la longitud. Y ya que estamos, este mensaje o clave de fallo de mensaje aquí. Se supone que esto es una esfera grande. En realidad ya no lo necesitamos porque podemos desferir esto porque podemos ver esto desde nuestras claves de mensaje del proveedor de datos. Así que eliminaremos esto si realmente quieres mantener ese mensaje. Podrías añadir otro valor aquí abajo en el proveedor de datos, en este, el array del proveedor de datos. Luego añade un argumento adicional aquí arriba y mételo igual que hicimos con la longitud y el tamaño esperado que se supone. Oye, oso, ven tú, ven

A,

Vamos, baja a tus perros, tira de las cuerdas. Todo lo que necesito es retroceder un poco aquí. Déjame retroceder. Muy bien, vamos a hacer nuestra prueba. Primero necesito despejar. De acuerdo. Volvamos a ejecutar nuestra prueba. Y también Dino tiene la descripción correcta del tamaño a partir de la longitud. Esto es mucho más significativo que lo que teníamos antes y también podemos ver que está utilizando nuestros conjuntos de datos con Dono de 10 metros, grande, mediano y pequeño. Pero

¿Qué

Sobre esta clave de mensaje de aquí? Bueno, vamos a cambiar este 10 y lo convertiremos en un 5. Ejecutaremos nuestra prueba rápidamente. Y puedes ver aquí que el Dino tiene la descripción correcta del tamaño del lago con 10 metros. La prueba de Dino grande ha fallado porque se supone que este es un dinosaurio grande y ha fallado porque sirve para que las dos cadenas sean idénticas. Y de nuevo, tenemos la diferencia de grande y mediano. Realmente no necesitamos esto. Se supone que este es un dinosaurio grande porque ya sabemos que desde Dino tiene la descripción correcta del tamaño desde la longitud y la clave del mensaje aquí. Así que vamos a eliminar eso. Fijaremos esto de nuevo en 10, y eliminaremos esta clave de mensaje. Y ya está. Si realmente necesitáramos mantener esa clave de mensaje para algo, podríamos añadir otro argumento a nuestro método de prueba y luego lanzar esa clave y nuestro proveedor de datos y pasarlo igual que hacemos con el Nu con nuestra longitud en, con nuestra longitud y nuestra cadena de tamaño esperado. Muy bien, vamos a ejecutar nuestras pruebas una última vez para asegurarnos de que siguen pasando. Y, por supuesto, tenemos cuatro pruebas y siete afirmaciones

Y genial que pasen. Tenemos cuatro pruebas y siete aserciones. Si quieres seguir una tipificación estricta como yo, podemos añadir un generador o un tipo de matriz para nuestro re no, podemos añadir un generador o una matriz para nuestro tipo de retorno en nuestro proveedor de datos. La mayoría de las veces verás el generador. Así que eso es lo que usaremos aquí. Y de nuevo, nuestros métodos de prueba, los métodos de prueba utilizan el tipo de retorno void, porque es realmente el único tipo de retorno apropiado para las pruebas unitarias de PHP, pero ninguno de esos tipos de retorno son, son necesarios. Ah, ¿cómo terminamos? Oh, deja de grabar. Ya está.
